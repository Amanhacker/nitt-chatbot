{
  "_args": [
    [
      "rasa-webchat",
      "/home/shakeel/hackathon/nitt_chat"
    ]
  ],
  "_from": "rasa-webchat",
  "_id": "rasa-webchat@0.7.17",
  "_inCache": true,
  "_installable": true,
  "_location": "/rasa-webchat",
  "_phantomChildren": {},
  "_requested": {
    "name": null,
    "raw": "rasa-webchat",
    "rawSpec": "rasa-webchat",
    "scope": null,
    "spec": "/home/shakeel/hackathon/nitt_chat/rasa-webchat",
    "type": "directory"
  },
  "_requiredBy": [
    "#USER"
  ],
  "_resolved": "file:rasa-webchat",
  "_shasum": "515bef66fbbb6d5f55f885fb955e5d397e3ceb25",
  "_shrinkwrap": null,
  "_spec": "rasa-webchat",
  "_where": "/home/shakeel/hackathon/nitt_chat",
  "author": {
    "email": "human@mrbot.ai",
    "name": "Mr. Bot"
  },
  "dependencies": {
    "@stomp/stompjs": "^5.4.2",
    "html-webpack-plugin": "^3.2.0",
    "immutable": "^3.8.2",
    "prop-types": "^15.7.2",
    "react-immutable-proptypes": "^2.1.0",
    "react-markdown": "^4.2.2",
    "react-redux": "^7.1.3",
    "redux": "^4.0.5",
    "socket.io": "^2.2.0",
    "socket.io-client": "^2.2.0",
    "sockjs-client": "^1.4.0"
  },
  "description": "Chat web widget for React apps and Rasa Core chatbots",
  "devDependencies": {
    "@commitlint/cli": "^8.2.0",
    "@commitlint/config-conventional": "^8.2.0",
    "babel-cli": "^6.24.1",
    "babel-eslint": "^7.2.2",
    "babel-jest": "^19.0.0",
    "babel-loader": "^7.1.5",
    "babel-plugin-module-resolver": "^2.7.1",
    "babel-plugin-transform-class-properties": "^6.24.1",
    "babel-plugin-transform-object-rest-spread": "^6.26.0",
    "babel-preset-env": "^1.7.0",
    "babel-preset-react": "^6.24.1",
    "babel-preset-stage-0": "^6.24.1",
    "clean-webpack-plugin": "^0.1.19",
    "css-loader": "^0.28.11",
    "enzyme": "^3.10.0",
    "enzyme-adapter-react-16": "^1.15.1",
    "eslint": "^4.18.2",
    "eslint-config-airbnb": "^14.1.0",
    "eslint-config-prettier": "^1.6.0",
    "eslint-import-resolver-babel-module": "^3.0.0",
    "eslint-plugin-flowtype": "^2.50.3",
    "eslint-plugin-import": "^2.18.2",
    "eslint-plugin-jsx-a11y": "^4.0.0",
    "eslint-plugin-prettier": "^2.7.0",
    "eslint-plugin-react": "^6.10.3",
    "husky": "^3.0.7",
    "jest": "^20.0.4",
    "lodash-webpack-plugin": "^0.11.5",
    "node-sass": "^4.12.0",
    "prettier": "^1.18.2",
    "prettier-eslint": "^5.1.0",
    "react": "^16.12.0",
    "react-dom": "^16.12.0",
    "redux-mock-store": "^1.5.3",
    "sass-loader": "^6.0.7",
    "standard-version": "^7.0.0",
    "style-loader": "^0.18.2",
    "url-loader": "^0.5.9",
    "webpack": "^4.39.3",
    "webpack-cli": "^3.3.7",
    "webpack-dev-server": "^3.8.0"
  },
  "gitHead": "6a54cc1387845e6b3e21db058a9664d0cb4fea1e",
  "husky": {
    "hooks": {
      "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"
    }
  },
  "jest": {
    "moduleNameMapper": {
      "\\.(css|scss)$": "<rootDir>/mocks/styleMock.js",
      "\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$": "<rootDir>/mocks/fileMock.js"
    },
    "setupTestFrameworkScriptFile": "<rootDir>/test-setup.js",
    "verbose": true
  },
  "keywords": [
    "chat",
    "javascript",
    "react",
    "widget"
  ],
  "license": "MIT",
  "main": "lib/index.js",
  "module": "module/index.js",
  "name": "rasa-webchat",
  "optionalDependencies": {},
  "peerDependencies": {
    "react": "^16.8.3",
    "react-dom": "^16.8.3"
  },
  "readme": "# Rasa Webchat ![npm](https://img.shields.io/npm/v/rasa-webchat)\n\nA simple webchat widget to connect with a chatbot ðŸ’¬platform. Originally forked from [react-chat-widget](https://github.com/Wolox/react-chat-widget) and optimized for [Rasa](https://github.com/rasaHQ/rasa) and [Botfront](https://github.com/botfront/botfront).\n## Features\n\n- Text Messages\n- Quick Replies\n- Images and Videos\n- Markdown support\n- Easy to import in a script tag or as a React Component\n- Persistent sessions\n- Typing indications\n- Smart delay between messages\n\n<img src=\"./assets/chat-demonstration.gif\" alt=\"demonstration\" width=\"400\"/>\n\n## Usage\n\n### In a `<script>` tag\n\nIn your `<body/>`:\n```javascript\n<div id=\"webchat\"/>\n<script src=\"https://storage.googleapis.com/mrbot-cdn/webchat-latest.js\"></script>\n// Or you can replace latest with a specific version\n<script>\n  WebChat.default.init({\n    selector: \"#webchat\",\n    initPayload: \"/get_started\",\n    customData: {\"language\": \"en\"}, // arbitrary custom data. Stay minimal as this will be added to the socket\n    socketUrl: \"http://localhost:5500\",\n    socketPath: \"/socket.io/\",\n    title: \"Title\",\n    subtitle: \"Subtitle\",\n  })\n</script>\n```\n\nAbout images: `width` and `height` define the size in pixels that images in messages are crop-scaled to. If not present, the image will scale to the maximum width of the container and the image.\n\nIt is recommended to use a particular version (i.e. \"webchat-<version>.js\") however the file \"webchat-latest.js\"\nis also available and is updated continuously with the latest version.\n\n### As a React component\n\nInstall the package from GitHub by running:\n```bash\nnpm install rasa-webchat\n```\n\nThen once it is installed it can be implemented as follows.\n\n```javascript\nimport { Widget } from 'rasa-webchat';\n\nfunction CustomWidget = () => {\n  return (\n    <Widget\n      initPayload={\"/get_started\"}\n      socketUrl={\"http://localhost:5500\"}\n      socketPath={\"/socket.io/\"}\n      customData={{\"language\": \"en\"}} // arbitrary custom data. Stay minimal as this will be added to the socket\n      title={\"Title\"}\n    />\n  )\n}\n```\n\n- Make sure to have the prop `embedded`\nset to `true` if you don't want to see the launcher.\n\n\n## Parameters\n| Prop / Param                 | Default value          | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |\n|------------------------|--------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| `initPayload`          | `null`             | Payload sent to Rasa when conversation starts                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |\n| `socketUrl`            | `null`             | Socket URL                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |\n| `socketPath`           | `null`             | Close the chat window                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |\n| `customData`           | `null`             | Arbitrary object sent with the socket. If using with Botfront, it must include the language (e.g. `{\"language\": \"en\"}`)                                                                                                                                                                                                                                                                                                                                                                                                      |\n| `docViewer`            | `false`            | If you add this prop to the component or to the init script, `docViewer=true` , this will treat links in received messages as links to a document ( `.pdf .doc .xlsx` etc. ) and will open them in a popup using `https://docs.google.com/viewer` service                                                                                                                                                                                                                                                                    |\n| `title`                | `'Welcome\"`        | Title shown in the header of the widget                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |\n| `subtitle`             | `null`             | Subtitle shown under the title in the header of the widget                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |\n| `inputTextFieldHint`   | `\"Type a message\"` | User message input field placeholder                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |\n| `hideWhenNotConnected` | `true`             | If `true` the widget will hide when the connection to the socket is lost                                                                                                                                                                                                                                                                                                                                                                                                                                                     |\n| `connectOn`            | `\"mount\"`          | This prop lets you choose when the widget will try connecting to the server. By default, it tries connecting as soon as it mounts. If you select `connectOn='open'` it will only attempt connection when the widget is opened. it can only take the values `mount` and `open`.                                                                                                                                                                                                                                               |\n| `onSocketEvent`        | `null`             | call custom code on a specific socket event                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |\n| `embedded`             | `false`            | Set to `true` if you want to embed the in a web page. The widget will always be open and the `initPayload` will be triggered immediately                                                                                                                                                                                                                                                                                                                                                                                     |\n| `showFullScreenButton` | `false`            | Show a full screen toggle                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |\n| `displayUnreadCount`   | `false`            | Path to an image displayed on the launcher when the widget is closed                                                                                                                                                                                                                                                                                                                                                                                                                                                         |\n| `showMessageDate`      | `false`            | Show message date. Can be overriden with a function: `(timestamp, message) => return 'my custom date'`                                                                                                                                                                                                                                                                                                                                                                                                                       |\n| `customMessageDelay`   | See below          | This prop is a function, the function take a message string as an argument. The defined function will be called everytime a message is received and the returned value will be used as a milliseconds delay before displaying a new message.                                                                                                                                                                                                                                                                                 |\n| `params`               | See below          | Essentially used to customize the image size.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |\n| `storage`              | `\"local\"`          | Specifies the storage location of the conversation state in the browser. `\"session\"` defines the state to be stored in the session storage. The session storage persists on reload of the page, and is cleared after the browser or tab is closed, or when `sessionStorage.clear()`is called. `\"local\"` defines the state to be stored in the local stoage. The local storage persists after the the browser is closed, and is cleared when the cookies of the browser are cleared, or when `localStorage.clear()`is called. |\n| `customComponent`      | `null`             | Custom component to be used with custom responses. E.g.: `customComponent={ (messageData) => (<div>Custom React component</div>)` }                                                                                                                                                                                                                                                                                                                                                                                          |\n\n| `onWidgetEvent`        | `{}`             | call custom code on a specific widget event ( onChatOpen, onChatClose, onChatHidden, are available for now ), add a function to the desired object property in the props to have it react to the event.\n\n### Additional Examples\n\n##### `customMessageDelay`\n```javascript\n(message) => {\n    let delay = message.length * 30;\n    if (delay > 2 * 1000) delay = 3 * 1000;\n    if (delay < 400) delay = 1000;\n    return delay;\n}\n```\n\n##### `onSocketEvent`\n```jsx\nonSocketEvent={{\n  'bot_uttered': () => console.log('the bot said something'),\n  'connect': () => console.log('connection established'),\n  'disconnect': () => doSomeCleanup(),\n}}\n```\n\n##### `params`\n\nThe `params` props only allows to specify custom image dimensions:\n```jsx\nparams={{\n        images: {\n          dims: {\n            width: 300,\n            height: 200\n          }\n        }\n      }}\n```\n\n### Other features\n\n#### Tooltip\n\nText messages received when the widget is closed will be shown as a tooltip.\n\n#### Sending a message on page load\n\nWhen reconnecting to an existing chat session, the bot will send a message contained in the localStorage key specified by the `NEXT_MESSAGE` constant. The message should be stringified JSON with a `message` property describing the message and an `expiry` property set to a UNIX timestamp in milliseconds after which this message should not be sent. This is useful if you would like your bot to be able to offer your user to navigate around the site.\n\n\n## API\n\n| Method                                   | Description                                                                                                                                                              |\n|------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| `WebChat.toggle()`                       | Toggle the open/close state of the chat window, send initPayload if webchat is not initialized and is toggled open                                                       |\n| `WebChat.open()`                         | Open the chat window, send initPayload if webchat is not initialized                                                                                                     |\n| `WebChat.close()`                        | Close the chat window                                                                                                                                                    |\n| `WebChat.isOpen()`                       | Get the open/closed state of the widget                                                                                                                                  |\n| `WebChat.show()`                         | Show the chat widget, send initPayload if the chat is in open state and not initialized                                                                                  |\n| `WebChat.hide()`                         | Hide the chat widget                                                                                                                                                     |\n| `WebChat.isVisible()`                    | Get the shown/hidden state of the widget                                                                                                                                 |\n| `WebChat.send(payload, text: optionnal)` | send a payload (`/intent{\"entity\":\"value\"}` to rasa. If `text` is specified, it will be displayed as a user message. If not specified, no user message will be displayed |                                                                       |\n\n### Backends\n\nThe widget can be used with any backend but is primarily designed to be used with [Rasa](https://github.com/rasaHQ/rasa) or [Botfront](https://github.com/botfront/botfront).\n\n#### Rasa\n\nUse the `socketio` channel: See [instructions in the Rasa documentation](https://rasa.com/docs/core/connectors/#socketio-connector)\n\nIf you want to process `customData` in Rasa  you have to [create a new channel](https://rasa.com/docs/core/connectors/#custom-channels). Use channel `rasa_core.channels.socketio` as a template for your new channel. In such channel `customData` can be retrieved via `data['customData']`. Then you can  modify `sender_id`, save `customData` to the database, fill slots or whatever you need to with your additional data.\n\n\n#### Botfront\n\nThe Rasa Webchat is developped by the [Botfront](https://botfront.io) team and it works with Botfront. Make sure to specificy the language in the `customData` prop. E.g. `customData={{language: 'en'}}`. See in [Botfront docs](https://botfront.io/docs/deployment/frontend/#frontend-configure-the-widget) for more details.\n\n#### Others\nYour backend must expose a socket with [socket.io](http://socket.io)\n\n##### Receiving messages from the chat\n\n```python\n@socketio.on('user_uttered')\n    def handle_message(message):\n        # do something\n```\n\n##### Sending messages from the backend to the chat widget\n\n###### sending plain text\n\n```python\nemit('bot_uttered', {\"text\": \"hello\"}, room=session_id)\n```\n\n###### sending quick replies\n\n```python\nmessage = {\n  \"text\": \"Happy?\",\n  \"quick_replies\":[\n    {\"title\":\"Yes\", \"payload\":\"/affirm\"},\n    {\"title\":\"No\", \"payload\":\"/deny\"}\n  ]}\nemit('bot_uttered', message, room=socket_id)\n```\n\n###### sending a link Snippet\n\nAdmittedly a bit far fetched, thinking that Snippets would evolve to carousels\nof generic templates :)\n\n```python\nmessage = {\n  \"attachment\":{\n    \"type\":\"template\",\n    \"payload\":{\n      \"template_type\":\"generic\",\n      \"elements\":[\n        {\n          \"title\":\"Title\",\n          \"buttons\":[ {\n            \"title\":\"Link name\",\n            \"url\": \"http://link.url\"\n          }\n        ]\n      }\n    ]\n  }\n}\n}\nemit('bot_uttered', message, room=socket_id)\n```\n\n###### sending a Video Message\n\n```python\nmessage = {\n  \"attachment\":{\n    \"type\":\"video\",\n    \"payload\":{\n      \"title\":\"Link name\",\n      \"src\": \"https://www.youtube.com/watch?v=f3EbDbm8XqY\"\n    }\n  }\n}\nemit('bot_uttered', message, room=socket_id)\n```\n\n###### sending an Image Message\n\n```python\nmessage = {\n      \"attachment\":{\n        \"type\":\"image\",\n        \"payload\":{\n          \"title\":\"Link name\",\n          \"src\": \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT_IX5FSDQLrwm9qvuXu_g7R9t_-3yBSycZ8OxpRXvMDaTAeBEW\"\n        }\n      }\n    }\nemit('bot_uttered', message, room=socket_id)\n```\n\n###### sending a message with custom data\n\n```python\nmessage = {\n      \"data\":{\n        \"customField1\": 'anything you want',\n        \"customField2\": 'other custom data, \n      }\n    }\nemit('bot_uttered', message, room=socket_id)\n```\n###### sending a message to be displayed as a tooltip\n\nYou first need to set a tooltipPayload in the props of the component, then, for the answer to that payload, you should define a response with a \n\nobject and a property `tooltip = true`. This message will then be displayed as a tooltip before the widget is opened.\nThis works with Botfront, but not yet with vanilla Rasa.\n\nThe prop `tooltipDelay` lets you set a delay before calling the payload. It default to 500ms.\n\n```python\nmessage = {\n  \"text\": \"Hi!\",\n  \"metadata\":{\n    \"tooltip\": true\n   }\n }\nemit('bot_uttered', message, room=socket_id)\n```\n\n\n## Styles\n\nhierarchy:\n```\n.conversation-container\n  |-- .header\n        |-- .title\n        |-- .close-function\n        |-- .loading\n  |-- .messages-container\n        |-- .message\n              |-- .client\n              |-- .response\n        |-- .replies\n              |-- .reply\n              |-- .response\n        |-- .snippet\n              |-- .snippet-title\n              |-- .snippet-details\n              |-- .link\n        |-- .imageFrame\n        |-- .videoFrame\n  |-- .sender\n        |-- .new-message\n        |-- .send\n```\n\n| Class                   |  Description                                                        |\n|-------------------------|---------------------------------------------------------------------|\n| .widget-container       | The div containing the chatbox of the default version               |\n| .widget-embedded        | div of the embedded chatbox (using embedded prop)                   |\n| .full-screen            | div of the fullscreen chatbox (using fullScreenMode prop)           |\n| .conversation-container | the parent div containing the header, message-container and sender  |\n| .messages-container     | the central area where the messages appear                          |\n| .sender                 | div of the bottom area which prompts user input                     |\n| .new-message            | the text input element of sender                                    |\n| .send                   | the send icon element of sender                                     |\n| .header                 | div of the top area with the chatbox header                         |\n| .title                  | the title element of the header                                     |\n| .close-button           | the close icon of the header                                        |\n| .loading                | the loading status element of the header                            |\n| .message                | the boxes holding the messages of client and response               |\n| .replies                | the area that gives quick reply options                             |\n| .snippet                | a component for describing links                                    |\n| .imageFrame             | a container for sending images                                      |\n| .videoFrame             | a container for sending video                                       |\n\n\n## Contributors\n[@PHLF](https://github.com/phlf)\n[@znat](https://github.com/znat)\n[@TheoTomalty](https://github.com/TheoTomalty)\n[@Hub4IT](https://github.com/Hub4IT)\n[@dliuproduction](https://github.com/dliuproduction)\n[@MatthieuJnon](https://github.com/MatthieuJnon)\n[@mofortin](https://github.com/mofortin)\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git@https://github.com/mrbot-ai/rasa-webchat.git"
  },
  "scripts": {
    "build": "webpack --config ./webpack.prod.js -p",
    "dev": "webpack-dev-server --config webpack.dev.js",
    "prepare": "npm run build",
    "release": "standard-version",
    "test": "jest --coverage"
  },
  "version": "0.7.17"
}
